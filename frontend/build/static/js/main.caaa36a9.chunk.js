(this["webpackJsonpreact-todo"]=this["webpackJsonpreact-todo"]||[]).push([[0],{50:function(e,t,n){},76:function(e,t,n){"use strict";n.r(t);var s=n(0),a=n.n(s),c=n(40),r=n.n(c),o=(n(50),n(20)),l=n(7),i=n(6),u=n.n(i),d=n(14),m=n(11),p=n(1);var f=function(e){var t=e.user,n=e.logout;return Object(p.jsxs)("header",{className:"flex justify-between items-center px-4 md:px-20 py-2 border-b",children:[Object(p.jsx)("h1",{className:"text-xl font-Anton",children:"ToDo :"}),Object(p.jsxs)("div",{className:"flex items-center",children:[Object(p.jsx)("div",{className:"profile-pic bg-red-200 w-7 h-7 md:w-10 md:h-10 rounded-full mr-2"}),Object(p.jsx)(o.b,{to:"#",onClick:n,children:Object(p.jsx)("p",{className:"font-Anton text-lg",children:null===t||void 0===t?void 0:t.name})})]})]})},b=n(21),x=n(78),j=n(79);var h=function(e){var t=e.id,n=e.title,s=e.complete,a=e.deleteTask;return Object(p.jsxs)("div",{className:"relative rounded-lg shadow-md bg-white px-5 py-2 cursor-pointer flex justify-between items-center focus:outline-none text-sm font-medium",children:[Object(p.jsxs)("div",{className:"flex items-center",children:[Object(p.jsx)("button",{className:"w-5 h-5 mr-1",onClick:function(){return a(t)},children:Object(p.jsx)(b.d,{className:" text-red-500"})}),n]}),Object(p.jsx)("input",{className:"form-radio h-4 w-4",type:"radio",name:"radio",id:n,onClick:function(){return s(t)}})]})};var g=function(e){e.id;var t=e.title;return Object(p.jsx)("div",{className:"bg-red-100 py-1 px-4 line-through font-OpenSans text-sm font-light text-red-600 rounded-lg ",children:t})},O=n(42),v=n.n(O).a.create({baseURL:"http://localhost:8080"});var y=function(e){var t=e.user,n=e.members,a=Object(s.useState)(""),c=Object(m.a)(a,2),r=c[0],o=c[1],l=Object(s.useState)(""),i=Object(m.a)(l,2),f=i[0],b=i[1],x=Object(s.useState)(""),j=Object(m.a)(x,2),h=j[0],g=j[1],O=function(){var e=Object(d.a)(u.a.mark((function e(n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,v.post("/api/users/register",{name:r,email:f,password:h,role:"Member",parent:t.id}).then((function(e){e&&(o(""),b(""),g(""),console.log("member added successfully!"))})).catch((function(e){console.log("add err >>>",e)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsxs)("div",{className:"bg-gray-50 p-4 hidden md:block h-screen",children:[Object(p.jsx)("h1",{className:"text-lg font-OpenSans font-semibold",children:"Team Members"}),Object(p.jsxs)("div",{className:"bg-gray-100 p-2 mt-4 rounded-xl",children:[Object(p.jsx)("p",{className:"mb-4 ml-1 text-sm  font-OpenSans font-semibold",children:"Add members to your team"}),Object(p.jsxs)("form",{children:[Object(p.jsx)("input",{type:"text",placeholder:"give a username to member",className:"w-full font-OpenSans text-sm font-normal my-1 py-1 2xl:py-3 px-2 2xl:px-4 rounded-lg focus:outline-none mb-2 ",onChange:function(e){return o(e.target.value)},value:r}),Object(p.jsx)("input",{type:"email",placeholder:"give a email to member",className:"w-full font-OpenSans text-sm font-normal my-1 py-1 2xl:py-3 px-2 2xl:px-4 rounded-lg focus:outline-none mb-2",onChange:function(e){return b(e.target.value)},value:f}),Object(p.jsx)("input",{type:"password",placeholder:"assign a password to member",className:"w-full font-OpenSans my-1 py-1 2xl:py-3 px-2 2xl:px-4 text-sm font-normal rounded-lg focus:outline-none mb-2",onChange:function(e){return g(e.target.value)},value:h}),Object(p.jsx)("button",{onClick:O,className:"bg-red-400 w-full rounded-lg my-2 py-1 2xl:py-3 text-white font-OpenSans font-semibold",children:"submit"})]})]}),Object(p.jsx)("div",{className:"mt-4 h-80 2xl:h-3/4 overflow-y-auto",children:n.map((function(e,t){return Object(p.jsxs)("div",{className:"my-2 bg-blue-50 py-1 2xl:py-2 px-4 font-OpenSans text-md font-semibold rounded-xl flex items-center",children:[Object(p.jsx)("div",{className:"w-7 h-7 rounded-full bg-blue-500 mr-2"}),e.name]},t)}))})]})},w=n(43),N=n.n(w);var k=function(){var e=Object(s.useState)(""),t=Object(m.a)(e,2),n=t[0],a=t[1],c=Object(s.useState)([]),r=Object(m.a)(c,2),o=r[0],i=r[1],O=Object(s.useState)([]),w=Object(m.a)(O,2),k=w[0],S=w[1],C=Object(s.useState)([]),A=Object(m.a)(C,2),D=A[0],I=A[1],T=Object(s.useState)(D[0]),F=Object(m.a)(T,2),J=F[0],M=F[1],_=Object(s.useState)(""),L=Object(m.a)(_,2),U=L[0],B=L[1],E=JSON.parse(localStorage.getItem("authUser")),P=Object(l.g)(),R=function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""===n){e.next=4;break}return e.next=4,v.post("/api/task/add",{task:n,assigned:E.id,complete:!1}).then().catch((function(e){console.log("add err >>>",e)}));case 4:a("");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.get("/api/task/sync",{params:{complete:!1,assigned:E.id}}).then((function(e){i(e.data)})).catch((function(e){console.log("fetch err >>>",e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.get("/api/task/sync",{params:{complete:!0,assigned:E.id}}).then((function(e){S(e.data)})).catch((function(e){console.log("Fetch complete err >>>",e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),z=function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.put("/api/task/update/".concat(t),{complete:!0}).then().catch((function(e){console.log("Complete err >>>",e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.delete("/api/task/delete/".concat(t)).then((function(){})).catch((function(e){console.log("Delete err >>>",e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.get("/api/users/sync",{params:{role:"Member",parent:E.id}}).then((function(e){I(e.data)})).catch((function(e){console.log("fetch err >>>",e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Q=function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""===U||""===J){e.next=4;break}return e.next=4,v.post("/api/task/add",{task:U,assigned:J._id,complete:!1}).then((function(){B(""),M("")})).catch((function(e){console.log("add err >>>",e)}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(s.useEffect)((function(){G(),q(),K()}),[]),Object(s.useEffect)((function(){var e=new N.a("73795cebf5c74388d2e3",{cluster:"ap2"}),t=e.subscribe("tasks");t.bind("inserted",(function(e){G()})),t.bind("updated",(function(e){G(),q()})),e.subscribe("users").bind("inserted",(function(e){K()}))}),[]),Object(p.jsxs)("div",{children:[Object(p.jsx)(f,{user:E,logout:function(){localStorage.clear(),P.push("/signin")}}),Object(p.jsxs)("div",{className:"md:grid grid-cols-4 h-screen",children:[Object(p.jsxs)("main",{className:"px-4 md:px-20 pt-5 col-span-3",children:[Object(p.jsx)("h1",{className:"font-Anton text-4xl text-left",children:"My Tasks"}),Object(p.jsxs)("div",{className:"my-6 flex flex-col md:flex-row md:space-x-4 space-y-4 md:space-y-0",children:[Object(p.jsxs)("div",{className:"bg-gray-50 rounded-2xl h-96 w-full md:w-72 2xl:w-96 2xl:h-100",children:[Object(p.jsx)("div",{className:"px-4 py-2 border-b font-OpenSans text-sm font-bold",children:Object(p.jsx)("h1",{children:"To Do"})}),Object(p.jsx)("div",{className:"pt-2 px-4",children:Object(p.jsx)("form",{className:"flex items-center",children:"Admin"===E.role&&Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("input",{type:"text",placeholder:"create task",className:" w-full h-7 text-sm px-2 bg-gray-100 text-gray-500 shadow-sm focus:outline-none focus:ring-2 ring-red-400 rounded-sm mr-2",value:n,onChange:function(e){return a(e.target.value)}}),Object(p.jsx)("button",{className:"w-7 h-7",onClick:R,children:Object(p.jsx)(b.b,{className:"text-red-500 bg-red-300 p-1 rounded-full"})})]})})}),Object(p.jsx)("div",{className:"my-2 h-72 overflow-y-auto",children:Object(p.jsx)("div",{className:"px-4 py-2 space-y-2",children:o.length>0&&o.map((function(e){return Object(p.jsx)(h,{id:e._id,title:e.task,complete:z,deleteTask:H},e._id)}))})})]}),Object(p.jsxs)("div",{className:"bg-gray-50 rounded-2xl h-96 w-full md:w-72 2xl:w-96 2xl:h-100",children:[Object(p.jsx)("div",{className:"px-4 py-2 border-b font-OpenSans text-sm font-bold",children:Object(p.jsx)("h1",{children:"Completed"})}),Object(p.jsx)("div",{className:"my-2 h-80 overflow-y-auto",children:Object(p.jsx)("div",{className:"px-4  space-y-2",children:k.length>0&&k.map((function(e){return Object(p.jsx)(g,{id:e._id,title:e.task},e._id)}))})})]}),"Admin"===E.role&&Object(p.jsxs)("div",{className:"bg-gray-50 rounded-2xl h-96 w-full md:w-72 2xl:w-96 2xl:h-100",children:[Object(p.jsx)("div",{className:"px-4 py-2 border-b font-OpenSans text-sm font-bold",children:Object(p.jsx)("h1",{children:"Assign task to member"})}),Object(p.jsx)("div",{className:"my-2 h-80 overflow-y-auto",children:Object(p.jsx)("div",{className:"px-4  space-y-2",children:Object(p.jsxs)("form",{children:[Object(p.jsx)("div",{className:"w-full mb-2",children:Object(p.jsx)(x.a,{value:J,onChange:M,children:Object(p.jsxs)("div",{className:"relative mt-1",children:[Object(p.jsxs)(x.a.Button,{className:"relative w-full py-2 pl-3 pr-10 text-left bg-white rounded-lg shadow-sm cursor-default focus:outline-none focus-visible:ring-2 focus-visible:ring-opacity-75 focus-visible:ring-white focus-visible:ring-offset-orange-300 focus-visible:ring-offset-2 focus-visible:border-indigo-500 sm:text-sm",children:[Object(p.jsx)("span",{className:"block truncate",children:J?J.name:"Choose a member"}),Object(p.jsx)("span",{className:"absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none",children:Object(p.jsx)(b.c,{className:"w-5 h-5 text-gray-400","aria-hidden":"true"})})]}),Object(p.jsx)(j.a,{as:s.Fragment,leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:Object(p.jsx)(x.a.Options,{className:"absolute w-full py-1 mt-1 overflow-auto text-base bg-white rounded-md shadow-lg max-h-60 ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm",children:D.map((function(e,t){return Object(p.jsx)(x.a.Option,{className:function(e){var t=e.active;return"".concat(t?"text-amber-900 bg-amber-100":"text-gray-900","\n                          cursor-default select-none relative py-2 pl-10 pr-4")},value:e,children:function(t){var n=t.selected;t.active;return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("span",{className:"".concat(n?"font-medium":"font-normal"," block truncate"),children:e.name}),n?Object(p.jsx)("span",{className:"".concat("text-amber-600","\n                                absolute inset-y-0 left-0 flex items-center pl-3"),children:Object(p.jsx)(b.a,{className:"w-5 h-5","aria-hidden":"true"})}):null]})}},t)}))})})]})})}),Object(p.jsx)("input",{type:"text",placeholder:"task",className:"w-full font-OpenSans text-sm font-normal my-1 py-1 2xl:py-3 px-2 2xl:px-4 rounded-lg focus:outline-none mb-2 ",value:U,onChange:function(e){return B(e.target.value)}}),Object(p.jsx)("button",{onClick:Q,className:"bg-red-400 w-full rounded-lg my-2 py-1 2xl:py-3 text-white font-OpenSans font-semibold",children:"submit"})]})})})]})]})]}),"Admin"===E.role&&Object(p.jsx)("div",{children:Object(p.jsx)(y,{user:E,members:D})})]})]})},S=n(77);function C(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(Boolean).join(" ")}var A=function(){var e=Object(s.useState)(""),t=Object(m.a)(e,2),n=t[0],a=t[1],c=Object(s.useState)(""),r=Object(m.a)(c,2),o=r[0],i=r[1],f=Object(s.useState)(""),b=Object(m.a)(f,2),x=b[0],j=b[1],h=Object(l.g)(),g=function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,v.post("/api/users/register",{name:n,email:o,password:x,role:"Admin"}).then((function(e){e&&(localStorage.setItem("token",e.data.token),localStorage.setItem("authUser",JSON.stringify(e.data.user)),h.push("/")),console.log("reg res >>>",e)})).catch((function(e){console.log("add err >>>",e)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,v.post("/api/auth",{email:o,password:x}).then((function(e){e&&(localStorage.setItem("token",e.data.token),localStorage.setItem("authUser",JSON.stringify(e.data.user)),h.push("/"))})).catch((function(e){console.log("add err >>>",e)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsx)("div",{className:"bg-blue-200 flex items-center justify-center h-screen",children:Object(p.jsx)("div",{className:"w-full max-w-md px-2 py-16 sm:px-0",children:Object(p.jsxs)(S.a.Group,{children:[Object(p.jsxs)(S.a.List,{className:"flex p-1 space-x-1 bg-blue-900/20 rounded-xl",children:[Object(p.jsx)(S.a,{className:function(e){return C("w-full py-2.5 text-sm leading-5 font-medium text-blue-700 rounded-lg","focus:outline-none focus:ring-2 ring-offset-2 ring-offset-blue-400 ring-white ring-opacity-60",e.selected?"bg-white shadow":"text-blue-100 hover:bg-white/[0.12] hover:text-white")},children:"Login"}),Object(p.jsx)(S.a,{className:function(e){return C("w-full py-2.5 text-sm leading-5 font-medium text-blue-700 rounded-lg","focus:outline-none focus:ring-2 ring-offset-2 ring-offset-blue-400 ring-white ring-opacity-60",e.selected?"bg-white shadow":"text-blue-100 hover:bg-white/[0.12] hover:text-white")},children:"Register"})]}),Object(p.jsxs)(S.a.Panels,{className:"mt-2",children:[Object(p.jsx)(S.a.Panel,{className:C("bg-white rounded-xl p-3","focus:outline-none focus:ring-2 ring-offset-2 ring-offset-blue-400 ring-white ring-opacity-60"),children:Object(p.jsx)("div",{children:Object(p.jsxs)("form",{className:"flex flex-col",children:[Object(p.jsx)("input",{type:"email",placeholder:"email",className:"bg-gray-50 py-2 px-6 rounded-lg my-2 font-OpenSans text-sm focus:outline-none",onChange:function(e){return i(e.target.value)}}),Object(p.jsx)("input",{type:"password",placeholder:"password",className:"bg-gray-50 py-2 px-6 rounded-lg my-2 font-OpenSans text-sm focus:outline-none",onChange:function(e){return j(e.target.value)}}),Object(p.jsx)("button",{onClick:O,className:"bg-red-400 py-2 font-OpenSans my-2 text-sm text-white font-semibold rounded-lg",children:"Login"})]})})}),Object(p.jsx)(S.a.Panel,{className:C("bg-white rounded-xl p-3","focus:outline-none focus:ring-2 ring-offset-2 ring-offset-blue-400 ring-white ring-opacity-60"),children:Object(p.jsx)("div",{children:Object(p.jsxs)("form",{className:"flex flex-col",children:[Object(p.jsx)("input",{type:"text",placeholder:"username",className:"bg-gray-50 py-2 px-6 rounded-lg my-2 font-OpenSans text-sm focus:outline-none",onChange:function(e){return a(e.target.value)}}),Object(p.jsx)("input",{type:"email",placeholder:"email",className:"bg-gray-50 py-2 px-6 rounded-lg my-2 font-OpenSans text-sm focus:outline-none",onChange:function(e){return i(e.target.value)}}),Object(p.jsx)("input",{type:"password",placeholder:"password",className:"bg-gray-50 py-2 px-6 rounded-lg my-2 font-OpenSans text-sm focus:outline-none",onChange:function(e){return j(e.target.value)}}),Object(p.jsx)("button",{onClick:g,className:"bg-red-400 py-2 my-2 font-OpenSans text-sm text-white font-semibold rounded-lg",children:"Register"})]})})})]})]})})})},D=n(26),I=n(44),T=["component"],F=function(e){var t=e.component,n=Object(I.a)(e,T);return Object(p.jsx)(l.b,Object(D.a)(Object(D.a)({},n),{},{render:function(e){return localStorage.getItem("token")?Object(p.jsx)(t,Object(D.a)({},e)):Object(p.jsx)(l.a,{to:"/signin"})}}))};var J=function(){return Object(p.jsx)("div",{className:"App",children:Object(p.jsx)(o.a,{children:Object(p.jsxs)(l.d,{children:[Object(p.jsx)(l.b,{path:"/signin",component:A}),Object(p.jsx)(F,{component:k,path:"/",exact:!0})]})})})};r.a.render(Object(p.jsx)(a.a.StrictMode,{children:Object(p.jsx)(J,{})}),document.getElementById("root"))}},[[76,1,2]]]);
//# sourceMappingURL=main.caaa36a9.chunk.js.map